<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-docs/design/code_and_name_organization/README">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<title data-rh="true">Code and name organization | Carbon Language</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://carbon-language.github.io/docs/design/code_and_name_organization/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Code and name organization | Carbon Language"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/carbon-logo.png"><link data-rh="true" rel="canonical" href="https://carbon-language.github.io/docs/design/code_and_name_organization/"><link data-rh="true" rel="alternate" href="https://carbon-language.github.io/docs/design/code_and_name_organization/" hreflang="en"><link data-rh="true" rel="alternate" href="https://carbon-language.github.io/docs/design/code_and_name_organization/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c274b177.css">
<link rel="preload" href="/assets/js/runtime~main.e89ea4d0.js" as="script">
<link rel="preload" href="/assets/js/main.6441d3bf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:var(--ifm-navbar-background-color);color:var(--ifm-font-color-base)" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="announcementBarContent_xLdY">⚠️ Carbon is experimental and not production-ready, see <a href="/docs/project/faq#how-soon-can-we-use-carbon">How soon can we use Carbon?</a></div><button type="button" class="clean-btn close announcementBarClose_gvF7" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/carbon-logo.png" alt="Carbon Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/carbon-logo.png" alt="Carbon Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Carbon Language</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/design/">Design</a><a class="navbar__item navbar__link" href="/docs/project/">Project</a><a class="navbar__item navbar__link" href="/docs/guides/">Guides</a><a class="navbar__item navbar__link" href="/docs/spec/">Spec</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/carbon-language/carbon-lang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/">Language design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/aliases/">Aliases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/blocks_and_statements/">Blocks and statements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/classes/">Classes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" href="/docs/design/code_and_name_organization/">Code and name organization</a><button aria-label="Toggle the collapsible sidebar category &#x27;Code and name organization&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design/code_and_name_organization/source_files/">Source files</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/design/control_flow/">Control flow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Control flow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/design/expressions/">Expressions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Expressions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/functions/">Functions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/design/generics/">Generics</a><button aria-label="Toggle the collapsible sidebar category &#x27;Generics&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/design/interoperability/">Bidirectional interoperability with C/C++</a><button aria-label="Toggle the collapsible sidebar category &#x27;Bidirectional interoperability with C/C++&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/design/lexical_conventions/">Lexical conventions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lexical conventions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/metaprogramming/">Metaprogramming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/name_lookup/">Name lookup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/naming_conventions/">Naming conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/pattern_matching/">Pattern matching</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/primitive_types/">Primitive types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/templates/">Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/tuples/">Tuples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/type_inference/">Type inference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/design/variables/">Variables</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Code and name organization</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Code and name organization</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="goals-and-philosophy">Goals and philosophy<a class="hash-link" href="#goals-and-philosophy" title="Direct link to heading">​</a></h2><p>Important Carbon goals for code and name organization are:</p><ul><li><p><a href="/docs/project/goals/#language-tools-and-ecosystem">Language tools and ecosystem</a></p><ul><li><p>Tooling support is important for Carbon, including the possibility of a
package manager.</p></li><li><p>Developer tooling, including both IDEs and refactoring tools, are
expected to exist and be well-supported.</p></li></ul></li><li><p><a href="/docs/project/goals/#software-and-language-evolution">Software and language evolution</a>:</p><ul><li><p>We should support libraries adding new structs, functions or other
identifiers without those new identifiers being able to shadow or break
existing users that already have identifiers with conflicting names.</p></li><li><p>We should make it easy to refactor code, including moving code between
files. This includes refactoring both by humans and by developer
tooling.</p></li></ul></li><li><p><a href="/docs/project/goals/#fast-and-scalable-development">Fast and scalable development</a>:</p><ul><li><p>It should be easy for developer tooling to parse code, without needing
to parse imports for context.</p></li><li><p>Structure should be provided for large projects to opt into features
which will help maintain scaling of their codebase, while not adding
burdens to small projects that don&#x27;t need it.</p></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p>Carbon <a href="/docs/design/code_and_name_organization/source_files/">source files</a> have a <code>.carbon</code> extension, such as
<code>geometry.carbon</code>. These files are the basic unit of compilation.</p><p>Each file begins with a declaration of which
<em>package</em><sup><small>[<a href="/docs/guides/glossary/#package">define</a>]</small></sup>
it belongs in. The package is the unit of <em>distribution</em>. The package name is a
single identifier, such as <code>Geometry</code>. An example API file in the <code>Geometry</code>
package would start with:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry api;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A tiny package may consist of a single library with a single file, and not use
any further features of the <code>package</code> keyword.</p><p>It is often useful to use separate files for the API and its implementation.
This may help organize code as a library grows, or to let the build system
distinguish between the dependencies of the API itself and its underlying
implementation. Implementation files allow for code to be extracted out from the
API file, while only being callable from other files within the library,
including both API and implementation files. Implementation files are marked by
both naming the file to use an extension of <code>.impl.carbon</code> and instead start
with:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry impl;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>However, as a package adds more files, it will probably want to separate out
into multiple
<em>libraries</em><sup><small>[<a href="/docs/guides/glossary/#library">define</a>]</small></sup>.
A library is the basic unit of <em>dependency</em>. Separating code into multiple
libraries can speed up the overall build while also making it clear which code
is being reused. For example, an API file adding the library <code>Shapes</code> to the
<code>Geometry</code> package, or <code>Geometry//Shapes</code> in
<a href="#shorthand-notation-for-libraries-in-packages">shorthand</a>, would start with:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry library &quot;Shapes&quot; api;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As code becomes more complex, and users pull in more code, it may also be
helpful to add
<em>namespaces</em><sup><small>[<a href="/docs/guides/glossary/#namespace">define</a>]</small></sup>
to give related entities consistently structured names. A namespace affects the
<em>name
path</em><sup><small>[<a href="/docs/guides/glossary/#name-path">define</a>]</small></sup>
used when calling code. For example, with no namespace, if a <code>Geometry</code> package
defines <code>Circle</code> then the name path will be <code>Geometry.Circle</code>. However, it can
be named <code>Geometry.TwoDimensional.Circle</code> with a <code>namespace</code>; for example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry library &quot;Shapes&quot; api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace TwoDimensional;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct TwoDimensional.Circle { ... };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This scaling of packages into libraries and namespaces is how Carbon supports
both small and large codebases.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sizing-packages-and-libraries">Sizing packages and libraries<a class="hash-link" href="#sizing-packages-and-libraries" title="Direct link to heading">​</a></h3><p>A different way to think of the sizing of packages and libraries is:</p><ul><li>A package is a GitHub repository.<ul><li>Small and medium projects that fit in a single repository will typically
have a single package. For example, a medium-sized project like
<a href="https://github.com/abseil/abseil-cpp/tree/master/absl" target="_blank" rel="noopener noreferrer">Abseil</a> could
still use a single <code>Abseil</code> package.</li><li>Large projects will have multiple packages. For example, Mozilla may
have multiple packages for Firefox and other efforts.</li></ul></li><li>A library is a few files that provide an interface and implementation, and
should remain small.<ul><li>Small projects will have a single library when it&#x27;s easy to maintain all
code in a few files.</li><li>Medium and large projects will have multiple libraries. For example,
<a href="https://github.com/boostorg/geometry/blob/develop/include/boost/geometry/algorithms/detail/distance/interface.hpp" target="_blank" rel="noopener noreferrer">Boost Geometry&#x27;s Distance</a>
interface and implementation might be its own library within <code>Boost</code>,
with dependencies on other libraries in <code>Boost</code> and potentially other
packages from Boost.<ul><li>Library names could be named after the feature, such as
<code>library &quot;Algorithms&quot;</code>, or include part of the path to reduce the
chance of name collisions, such as <code>library &quot;Geometry/Algorithms&quot;</code>.</li></ul></li></ul></li></ul><p>Packages may choose to expose libraries that expose unions of interfaces from
other libraries within the package. However, doing so would also provide the
transitive closure of build-time dependencies, and is likely to be discouraged
in many cases.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="imports">Imports<a class="hash-link" href="#imports" title="Direct link to heading">​</a></h3><p>The <code>import</code> keyword supports reusing code from other files and libraries.</p><p>For example, to use <code>Geometry.Circle</code> from the <code>Geometry//Shapes</code> library:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Geometry library &quot;Shapes&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Area(circle: Geometry.Circle) { ... };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>library</code> keyword is optional for <code>import</code>, and its use should parallel that
of <code>library</code> on the <code>package</code> of the code being imported.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="source-file-introduction">Source file introduction<a class="hash-link" href="#source-file-introduction" title="Direct link to heading">​</a></h3><p>Every source file will consist of, in order:</p><ol><li>One <code>package</code> directive.</li><li>A section of zero or more <code>import</code> directives.</li><li>Source file body, with other code.</li></ol><p>Comments and blank lines may be intermingled with these sections.
<a href="/docs/design/metaprogramming/">Metaprogramming</a> code may also be
intermingled, so long as the outputted code is consistent with the enforced
ordering. Other types of code must be in the source file body.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="name-paths">Name paths<a class="hash-link" href="#name-paths" title="Direct link to heading">​</a></h3><p><a href="#name-paths">Name paths</a> are defined above as sequences of identifiers
separated by dots. This syntax may be loosely expressed as a regular expression:</p><div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IDENTIFIER(\.IDENTIFIER)*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Name conflicts are addressed by <a href="/docs/design/name_lookup/">name lookup</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="package-directives"><code>package</code> directives<a class="hash-link" href="#package-directives" title="Direct link to heading">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="packages">Packages<a class="hash-link" href="#packages" title="Direct link to heading">​</a></h3><p>The <code>package</code> directive&#x27;s syntax may be loosely expressed as a regular
expression:</p><div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package IDENTIFIER (library STRING)? (api|impl);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry library &quot;Objects/FourSides&quot; api;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Breaking this apart:</p><ul><li>The identifier passed to the <code>package</code> keyword, <code>Geometry</code>, is the package
name and will prefix both library and namespace paths.<ul><li>The <code>package</code> keyword also declares a package entity matching the
package name. A package entity is almost identical to a namespace
entity, except with some package/import-specific handling. In other
words, if the file declares <code>struct Line</code>, that may be used from within
the file as both <code>Line</code> directly and <code>Geometry.TwoDimensional.Line</code>
using the <code>Geometry</code> package entity created by the <code>package</code> keyword.</li></ul></li><li>When the optional <code>library</code> keyword is specified, sets the name of the
library within the package. In this example, the
<code>Geometry//Objects/FourSides</code> library will be used.</li><li>The use of the <code>api</code> keyword indicates this is an API files as described
under <a href="#libraries">libraries</a>. If it instead had <code>impl</code>, this would be an
implementation file.</li></ul><p>Because every file must have exactly one <code>package</code> directive, there are a couple
important and deliberate side-effects:</p><ul><li>Every file will be in precisely one library.<ul><li>A library still exists even when there is no explicit library argument,
such as <code>package Geometry api;</code>. This could be considered equivalent to
<code>package Geometry library &quot;&quot; api;</code>, although we should not allow that
specific syntax as error-prone.</li></ul></li><li>Every entity in Carbon will be in a namespace, even if its namespace path
consists of only the package name. There is no &quot;global&quot; namespace.<ul><li>Every entity in a file will be defined within the namespace described in
the <code>package</code> directive.</li><li>Entities within a file may be defined in
<a href="#namespaces">child namespaces</a>.</li></ul></li></ul><p>Files contributing to the <code>Geometry//Objects/FourSides</code> library must all start
with <code>package Geometry library &quot;Objects/FourSides&quot;</code>, but will differ on
<code>api</code>/<code>impl</code> types.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="shorthand-notation-for-libraries-in-packages">Shorthand notation for libraries in packages<a class="hash-link" href="#shorthand-notation-for-libraries-in-packages" title="Direct link to heading">​</a></h4><p>Library names may also be referred to as <code>PACKAGE//LIBRARY</code> as shorthand in
text. <code>PACKAGE//default</code> will refer to the name of the library used when no
<code>library</code> argument is specified, although <code>PACKAGE</code> may also be used in
situations where it is unambiguous that it still refers to the default library.</p><p>It&#x27;s recommended that libraries use a single <code>/</code> for separators where desired,
in order to distinguish between the <code>//</code> of the package and <code>/</code> separating
library segments. For example, <code>Geometry//Objects/FourSides</code> uses a single <code>/</code>
to separate the <code>Object/FourSides</code> library name.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="package-name-conflicts">Package name conflicts<a class="hash-link" href="#package-name-conflicts" title="Direct link to heading">​</a></h4><p>Because the package also declares a namespace entity with the same name,
conflicts with the package name are possible. We do not support packages
providing entities with the same name as the package.</p><p>For example, this is a conflict for <code>DateTime</code>:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package DateTime api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct DateTime { ... };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This declaration is important for <a href="#libraries">implementation files</a>, which
implicitly import the library&#x27;s API, because it keeps the package name as an
explicit entity in source files.</p><p>Note that <a href="#package-and-library-name-conflicts">imported name conflicts</a> are
handled differently.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="libraries">Libraries<a class="hash-link" href="#libraries" title="Direct link to heading">​</a></h3><p>Every Carbon library consists of one or more files. Each Carbon library has a
primary file that defines its API, and may optionally contain additional files
that are implementation.</p><ul><li>An API file&#x27;s <code>package</code> directive will have <code>api</code>. For example,
<code>package Geometry library &quot;Shapes&quot; api;</code><ul><li>API filenames must have the <code>.carbon</code> extension. They must not have a
<code>.impl.carbon</code> extension.</li><li>API file paths will correspond to the library name.<ul><li>The precise form of this correspondence is undetermined, but should
be expected to be similar to a &quot;Math/Algebra&quot; library being in a
&quot;Math/Algebra.carbon&quot; file path.</li><li>The package will not be used when considering the file path.</li></ul></li></ul></li><li>An implementation file&#x27;s <code>package</code> directive will have <code>impl</code>. For example,
<code>package Geometry library &quot;Shapes&quot; impl;</code>.<ul><li>Implementation filenames must have the <code>.impl.carbon</code> extension.</li><li>Implementation file paths need not correspond to the library name.</li><li>Implementation files implicitly import the library&#x27;s API. Implementation
files cannot import each other. There is no facility for file or
non-<code>api</code> imports.</li></ul></li></ul><p>The difference between API and implementation will act as a form of access
control. API files must compile independently of implementation, only importing
from APIs from other libraries. API files are also visible to all files and
libraries for import. Implementation files only see API files for import, not
other implementation files.</p><p>When any file imports a library&#x27;s API, it should be expected that the transitive
closure of imported files from the primary API file will be a compilation
dependency. The size of that transitive closure affects compilation time, so
libraries with complex implementations should endeavor to minimize their API
imports.</p><p>Libraries also serve as a critical unit of compilation. Dependencies between
libraries must be clearly marked, and the resulting dependency graph will allow
for separate compilation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exporting-entities-from-an-api-file">Exporting entities from an API file<a class="hash-link" href="#exporting-entities-from-an-api-file" title="Direct link to heading">​</a></h4><p>Entities in the API file are part of the library&#x27;s public API by default. They
may be marked as <code>private</code> to indicate they should only be visible to other
parts of the library.</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry library &quot;Shapes&quot; api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Circle is an API, and will be available to other libraries as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Geometry.Circle.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Circle { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// CircleHelper is private, and so will not be available to other libraries.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private fn CircleHelper(circle: Circle) { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Only entities in namespaces should be marked as an API, not the namespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// itself.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Operations;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Operations.GetCircumference is an API, and will be available to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// other libraries as Geometry.Operations.GetCircumference.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Operations.GetCircumference(circle: Circle) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This means that an API file can contain all implementation code for a library.
However, separate implementation files are still desirable for a few reasons:</p><ul><li>It will be easier for readers to quickly scan an API-only file for API
documentation.</li><li>Reducing the amount of code in an API file can speed up compilation,
especially if fewer imports are needed. This can result in transitive
compilation performance improvements for files using the library.</li><li>From a code maintenance perspective, having smaller files can make a library
more maintainable.</li></ul><p>Entities in the <code>impl</code> file should never have visibility keywords. If they are
forward declared in the <code>api</code> file, they use the declaration&#x27;s visibility; if
they are only present in the <code>impl</code> file, they are implicitly <code>private</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="granularity-of-libraries">Granularity of libraries<a class="hash-link" href="#granularity-of-libraries" title="Direct link to heading">​</a></h4><p>The compilation graph of Carbon will generally consist of <code>api</code> files depending
on each other, and <code>impl</code> files depending only on <code>api</code> files. Compiling a given
file requires compiling the transitive closure of <code>api</code> files first.
Parallelization of compilation is then limited by how large that transitive
closure is, in terms of total volume of code rather than quantity. This also
affects build cache invalidation.</p><p>In order to maximize opportunities to improve compilation performance, we will
encourage granular libraries. Conceptually, we want libraries to be very small,
possibly containing only a single class. The choice of only allowing a single
<code>api</code> file per library should help encourage developers to write small
libraries.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exporting-namespaces">Exporting namespaces<a class="hash-link" href="#exporting-namespaces" title="Direct link to heading">​</a></h4><p>Any entity may be marked with <code>api</code> except for namespace and package entities.
That is, <code>api namespace Sha256;</code> is invalid code. Instead, namespaces are
implicitly exported based on the name paths of other entities marked as <code>api</code>.</p><p>For example, given this code:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Checksums library &quot;Sha&quot; api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespaces Sha256;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Sha256.HexDigest(data: Bytes) -&gt; String { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Calling code may look like:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Caller api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Checksums library &quot;Sha&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Process(data: Bytes) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  var digest: String = Checksums.Sha256.HexDigest(data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, the <code>Sha256</code> namespace is exported as part of the API
implicitly.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="imports-1">Imports<a class="hash-link" href="#imports-1" title="Direct link to heading">​</a></h3><p><code>import</code> directives supports reusing code from other files and libraries. The
<code>import</code> directive&#x27;s syntax may be loosely expressed as a regular expression:</p><div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import IDENTIFIER (library NAME_PATH)?;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>An import declares a package entity named after the imported package, and makes
API entities from the imported library available through it. The full name path
is a concatenation of the names of the package entity, any namespace entities
applied, and the final entity addressed. Child namespaces or entities may be
<a href="/docs/design/aliases/">aliased</a> if desired.</p><p>For example, given a library:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Math api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Trigonometry;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn Trigonometry.Sin(...);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Calling code would import it and use it like:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Math;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn DoSomething() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Math.Trigonometry.Sin(...);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Repeat imports from the same package reuse the same package entity. For example,
this produces only one <code>Math</code> package entity:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Math;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Math library &quot;Trigonometry&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>NOTE: A library must never import itself. Any <code>impl</code> files in a library
automatically import the <code>api</code>, so a self-import should never be required.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="imports-from-the-current-package">Imports from the current package<a class="hash-link" href="#imports-from-the-current-package" title="Direct link to heading">​</a></h4><p>Entities defined in the current file may be used without mentioning the package
prefix. However, other symbols from the package must be imported and accessed
through the package namespace just like symbols from any other package.</p><p>For example:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// This is required even though it&#x27;s still in the Geometry package.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Geometry library &quot;Shapes&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Circle must be referenced using the Geometry namespace of the import.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn GetArea(c: Geometry.Circle) { ... }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="namespaces">Namespaces<a class="hash-link" href="#namespaces" title="Direct link to heading">​</a></h3><p>Namespaces offer named paths for entities. Namespaces may be nested. Multiple
libraries may contribute to the same namespace. In practice, packages may have
namespaces such as <code>Testing</code> containing entities that benefit from an isolated
space but are present in many libraries.</p><p>The <code>namespace</code> keyword&#x27;s syntax may loosely be expressed as a regular
expression:</p><div class="language-regex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-regex codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace NAME_PATH;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>namespace</code> keyword declares a namespace entity. The namespace is applied to
other entities by including it as a prefix when declaring a name. For example:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Time;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Timezones.Internal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Timezones.Internal.RawData { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn ParseData(data: Timezones.Internal.RawData);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A namespace declaration adds the first identifier in the name path as a name in
the file&#x27;s namespace. In the above example, after declaring
<code>namespace Timezones.Internal;</code>, <code>Timezones</code> is available as an identifier and
<code>Internal</code> is reached through <code>Timezones</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="re-declaring-imported-namespaces">Re-declaring imported namespaces<a class="hash-link" href="#re-declaring-imported-namespaces" title="Direct link to heading">​</a></h4><p>Namespaces may exist on imported package entities, in addition to being declared
in the current file. However, even if the namespace already exists in an
imported library from the current package, the namespace must still be declared
locally in order to add symbols to it.</p><p>For example, if the <code>Geometry//Shapes/ThreeSides</code> library provides the
<code>Geometry.Shapes</code> namespace, this code is still valid:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">package Geometry library &quot;Shapes/FourSides&quot; api;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Geometry library &quot;Shapes/ThreeSides&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// This does not conflict with the existence of `Geometry.Shapes` from</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `Geometry//Shapes/ThreeSides`, even though the name path is identical.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Shapes;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// This requires the above &#x27;namespace Shapes&#x27; declaration. It cannot use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// `Geometry.Shapes` from `Geometry//Shapes/ThreeSides`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Shapes.Square { ... };</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="aliasing">Aliasing<a class="hash-link" href="#aliasing" title="Direct link to heading">​</a></h4><p>Carbon&#x27;s <a href="/docs/design/aliases/">alias keyword</a> will support aliasing
namespaces. For example, this would be valid code:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">namespace Timezones.Internal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">alias TI = Timezones.internal;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct TI.RawData { ... }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn ParseData(data: TI.RawData);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="caveats">Caveats<a class="hash-link" href="#caveats" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-and-library-name-conflicts">Package and library name conflicts<a class="hash-link" href="#package-and-library-name-conflicts" title="Direct link to heading">​</a></h3><p>Library name conflicts should not occur, because it&#x27;s expected that a given
package is maintained by a single organization. It&#x27;s the responsibility of that
organization to maintain unique library names within their package.</p><p>A package name conflict occurs when two different packages use the same name,
such as two packages named <code>Stats</code>. Versus libraries, package name conflicts are
more likely because two organizations may independently choose identical names.
We will encourage a unique package naming scheme, such as maintaining a name
server for open source packages. Conflicts can also be addressed by renaming one
of the packages, either at the source, or as a local modification.</p><p>We do need to address the case of package names conflicting with other entity
names. It&#x27;s possible that a preexisting entity will conflict with a new import,
and that renaming the entity is infeasible to rename due to existing callers.
Alternately, the entity may be using an idiomatic name that it would contradict
naming conventions to rename. In either case, this conflict may exist in a
single file without otherwise affecting users of the API. This will be addressed
by <a href="/docs/design/name_lookup/">name lookup</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="potential-refactorings">Potential refactorings<a class="hash-link" href="#potential-refactorings" title="Direct link to heading">​</a></h3><p>These are potential refactorings that we consider important to make it easy to
automate.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="update-imports">Update imports<a class="hash-link" href="#update-imports" title="Direct link to heading">​</a></h4><p>Imports will frequently need to be updated as part of refactorings.</p><p>When code is deleted, it should be possible to parse the remaining code, parse
the imports, and determine which entities in imports are referred to. Unused
imports can then be removed.</p><p>When code is moved, it&#x27;s similar to deletion in the originating file. For the
destination file, the moved code should be parsed to determine which entities it
referred to from the originating file&#x27;s imports, and these will need to be
included in the destination file: either reused if already present, or added.</p><p>When new code is added, existing imports can be checked to see if they provide
the symbol in question. There may also be heuristics which can be implemented to
check build dependencies for where imports should be added from, such as a
database of possible entities and their libraries. However, adding references
may require manually adding imports.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="between-api-and-impl-files">Between <code>api</code> and <code>impl</code> files<a class="hash-link" href="#between-api-and-impl-files" title="Direct link to heading">​</a></h4><ul><li><p>Move an implementation of an API from an <code>api</code> file to an <code>impl</code> file, while
leaving a declaration behind.</p><ul><li>This should be a local change that will not affect any calling code.</li><li>Inlining will be affected because the implementation won&#x27;t be visible to
callers.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li><li><p>Split an <code>api</code> and <code>impl</code> file.</p><ul><li>This is a repeated operation of individual API moves, as noted above.</li></ul></li><li><p>Move an implementation of an API from an <code>impl</code> file to an <code>api</code> file.</p><ul><li>This should be a local change that will not affect any calling code.</li><li>Inlining will be affected because the implementation becomes visible to
callers.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li><li><p>Combine an <code>api</code> and <code>impl</code> file.</p><ul><li>This is a repeated operation of individual API moves, as noted above.</li></ul></li><li><p>Remove the <code>api</code> label from a declaration.</p><ul><li>Search for library-external callers, and fix them first.</li></ul></li><li><p>Add the <code>api</code> label to a declaration.</p><ul><li>This should be a local change that will not affect any calling code.</li></ul></li><li><p>Move a non-<code>api</code>-labeled declaration from an <code>api</code> file to an <code>impl</code> file.</p><ul><li>The declaration must be moved to the same file as the implementation of
the declaration.</li><li>The declaration can only be used by the <code>impl</code> file that now contains
it. Search for other callers within the library, and fix them first.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li><li><p>Move a non-<code>api</code>-labeled declaration from an <code>impl</code> file to an <code>api</code> file.</p><ul><li>This should be a local change that will not affect any calling code.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li><li><p>Move a declaration and implementation from one <code>impl</code> file to another.</p><ul><li>Search for any callers within the source <code>impl</code> file, and either move
them too, or fix them first.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-refactorings">Other refactorings<a class="hash-link" href="#other-refactorings" title="Direct link to heading">​</a></h4><ul><li><p>Rename a package.</p><ul><li>The imports of all calling files must be updated accordingly.</li><li>All call sites must be changed, as the package name changes.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li><li><p>Move an <code>api</code>-labeled declaration and implementation between different
packages.</p><ul><li>The imports of all calling files must be updated accordingly.</li><li>All call sites must be changed, as the package name changes.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li><li><p>Move an <code>api</code>-labeled declaration and implementation between libraries in
the same package.</p><ul><li>The imports of all calling files must be updated accordingly.</li><li>As long as the namespaces remain the same, no call sites will need to be
changed.</li><li><a href="#update-imports">Update imports</a>.</li></ul></li><li><p>Rename a library.</p><ul><li>This is equivalent to a repeated operation of moving an <code>api</code>-labeled
declaration and implementation between libraries in the same package.</li></ul></li><li><p>Move a declaration and implementation from one namespace to another.</p><ul><li>Ensure the new namespace is declared for the declaration and
implementation.</li><li>Update the namespace used by call sites.</li><li>The imports of all calling files may remain the same.</li></ul></li><li><p>Rename a namespace.</p><ul><li>This is equivalent to a repeated operation of moving a declaration and
implementation from one namespace to another.</li></ul></li><li><p>Rename a file, or move a file between directories.</p><ul><li>Build configuration will need to be updated.</li><li>This additionally requires the steps to rename a library, because
library names must correspond to the renamed paths.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preference-for-few-child-namespaces">Preference for few child namespaces<a class="hash-link" href="#preference-for-few-child-namespaces" title="Direct link to heading">​</a></h3><p>We expect that most code should use a package and library, but avoid specifying
namespaces beneath the package. The package name itself should typically be
sufficient distinction for names.</p><p>Child namespaces create longer names, which engineers will dislike typing. Based
on experience, we expect to start seeing aliasing even at name lengths around
six characters long. With longer names, we should expect more aliasing, which in
turn will reduce code readability because more types will have local names.</p><p>We believe it&#x27;s feasible for even large projects to collapse namespaces down to
a top level, avoiding internal tiers of namespaces.</p><p>We understand that child namespaces are sometimes helpful, and will robustly
support them for that. However, we will model code organization to encourage
fewer namespaces.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redundant-markers">Redundant markers<a class="hash-link" href="#redundant-markers" title="Direct link to heading">​</a></h3><p>We use a few possibly redundant markers for packages and libraries:</p><ul><li>The <code>package</code> keyword requires one of <code>api</code> and <code>impl</code>, rather than
excluding either or both.</li><li>The filename repeats the <code>api</code> versus <code>impl</code> choice.</li><li>The <code>import</code> keyword requires the full library.</li></ul><p>These choices are made to assist human readability and tooling:</p><ul><li>Being explicit about imports creates the opportunity to generate build
dependencies from files, rather than having them maintained separately.</li><li>Being explicit about <code>api</code> versus <code>impl</code> makes it easier for both humans and
tooling to determine what to expect.</li><li>Repeating the type in the filename makes it possible to check the type
without reading file content.</li><li>Repeating the type in the file content makes non-file-system-based builds
possible.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-questions">Open questions<a class="hash-link" href="#open-questions" title="Direct link to heading">​</a></h2><p>These open questions are expected to be revisited by future proposals.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="different-file-extensions">Different file extensions<a class="hash-link" href="#different-file-extensions" title="Direct link to heading">​</a></h3><p>Currently, we&#x27;re using <code>.carbon</code> and <code>.impl.carbon</code>. In the future, we may want
to change the extension, particularly because Carbon may be renamed.</p><p>There are several other possible extensions / commands that we&#x27;ve considered in
coming to the current extension:</p><ul><li><code>.carbon</code>: This is an obvious and unsurprising choice, but also quite long
for a file extension.</li><li><code>.6c</code>: This sounds a little like &#x27;sexy&#x27; when read aloud.</li><li><code>.c6</code>: This seems a weird incorrect ordering of the atomic number and has a
bad, if obscure, Internet slang association.</li><li><code>.cb</code> or <code>.cbn</code>: These collide with several acronyms and may not be
especially memorable as referring to Carbon.</li><li><code>.crb</code>: This has a bad Internet slang association.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="imports-from-other-languages">Imports from other languages<a class="hash-link" href="#imports-from-other-languages" title="Direct link to heading">​</a></h3><p>Currently, we do not support cross-language imports. In the future, we will
likely want to support imports from other languages, particularly for C++
interoperability.</p><p>To fit into the proposed <code>import</code> syntax, we are provisionally using a special
<code>Cpp</code> package to import headers from C++ code, as in:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Cpp library &quot;&lt;map&gt;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import Cpp library &quot;myproject/myclass.h&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn MyCarbonCall(x: Cpp.std.map(Cpp.MyProject.MyClass));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="imports-from-urls">Imports from URLs<a class="hash-link" href="#imports-from-urls" title="Direct link to heading">​</a></h3><p>Currently, we don&#x27;t support any kind of package management with imports. In the
future, we may want to support tagging imports with a URL that identifies the
repository where that package can be found. This can be used to help drive
package management tooling and to support providing a non-name identity for a
package that is used to enable handling conflicted package names.</p><p>Although we&#x27;re not designing this right now, it could fit into the proposed
syntax. For example:</p><div class="language-carbon codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-carbon codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import Carbon library &quot;Utilities&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url(&quot;https://github.com/carbon-language/carbon-libraries&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-file-type">Test file type<a class="hash-link" href="#test-file-type" title="Direct link to heading">​</a></h3><p>Similar to <code>api</code> and <code>impl</code>, we may eventually want a type like <code>test</code>. This
should be part of a larger testing plan.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alternatives-considered">Alternatives considered<a class="hash-link" href="#alternatives-considered" title="Direct link to heading">​</a></h2><ul><li>Packages<ul><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#name-paths-for-package-names" target="_blank" rel="noopener noreferrer">Name paths for package names</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#referring-to-the-package-as-package" target="_blank" rel="noopener noreferrer">Referring to the package as <code>package</code></a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#remove-the-library-keyword-from-package-and-import" target="_blank" rel="noopener noreferrer">Remove the <code>library</code> keyword from <code>package</code> and <code>import</code></a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#rename-package-concept" target="_blank" rel="noopener noreferrer">Rename package concept</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#no-association-between-the-file-system-path-and-librarynamespace" target="_blank" rel="noopener noreferrer">No association between the file system path and library/namespace</a></li></ul></li><li>Libraries<ul><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#allow-exporting-namespaces" target="_blank" rel="noopener noreferrer">Allow exporting namespaces</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#allow-importing-implementation-files-from-within-the-same-library" target="_blank" rel="noopener noreferrer">Allow importing implementation files from within the same library</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#alternative-library-separators-and-shorthand" target="_blank" rel="noopener noreferrer">Alternative library separators and shorthand</a><ul><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#single-word-libraries" target="_blank" rel="noopener noreferrer">Single-word libraries</a></li></ul></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#collapse-api-and-implementation-file-concepts" target="_blank" rel="noopener noreferrer">Collapse API and implementation file concepts</a><ul><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#automatically-generating-the-api-separation" target="_blank" rel="noopener noreferrer">Automatically generating the API separation</a></li></ul></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#collapse-file-and-library-concepts" target="_blank" rel="noopener noreferrer">Collapse file and library concepts</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#collapse-the-library-concept-into-packages" target="_blank" rel="noopener noreferrer">Collapse the library concept into packages</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#collapse-the-package-concept-into-libraries" target="_blank" rel="noopener noreferrer">Collapse the package concept into libraries</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0752.md#default-api-to-private" target="_blank" rel="noopener noreferrer">Default <code>api</code> to private</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0752.md#default-impl-to-public" target="_blank" rel="noopener noreferrer">Default <code>impl</code> to public</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#different-file-type-labels" target="_blank" rel="noopener noreferrer">Different file type labels</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#function-like-syntax" target="_blank" rel="noopener noreferrer">Function-like syntax</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#inlining-from-implementation-files" target="_blank" rel="noopener noreferrer">Inlining from implementation files</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#library-private-access-controls" target="_blank" rel="noopener noreferrer">Library-private access controls</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0752.md#make-keywords-either-optional-or-required-in-separate-definitions" target="_blank" rel="noopener noreferrer">Make keywords either optional or required in separate definitions</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#managing-api-versus-implementation-in-libraries" target="_blank" rel="noopener noreferrer">Managing API versus implementation in libraries</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#multiple-api-files" target="_blank" rel="noopener noreferrer">Multiple API files</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#name-paths-as-library-names" target="_blank" rel="noopener noreferrer">Name paths as library names</a></li></ul></li><li>Imports<ul><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#block-imports" target="_blank" rel="noopener noreferrer">Block imports</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#block-imports-of-libraries-of-a-single-package" target="_blank" rel="noopener noreferrer">Block imports of libraries of a single package</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#broader-imports-either-all-names-or-arbitrary-code" target="_blank" rel="noopener noreferrer">Broader imports, either all names or arbitrary code</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#direct-name-imports" target="_blank" rel="noopener noreferrer">Direct name imports</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#optional-package-names" target="_blank" rel="noopener noreferrer">Optional package names</a></li></ul></li><li>Namespaces<ul><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#file-level-namespaces" target="_blank" rel="noopener noreferrer">File-level namespaces</a></li><li><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/proposals/p0107.md#scoped-namespaces" target="_blank" rel="noopener noreferrer">Scoped namespaces</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h2><ul><li>Proposal
<a href="https://github.com/carbon-language/carbon-lang/pull/107" target="_blank" rel="noopener noreferrer">#107: Code and name organization</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/docs/../docs/design/code_and_name_organization/README.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/design/classes/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Classes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/design/code_and_name_organization/source_files/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Source files</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#goals-and-philosophy" class="table-of-contents__link toc-highlight">Goals and philosophy</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#sizing-packages-and-libraries" class="table-of-contents__link toc-highlight">Sizing packages and libraries</a></li><li><a href="#imports" class="table-of-contents__link toc-highlight">Imports</a></li></ul></li><li><a href="#details" class="table-of-contents__link toc-highlight">Details</a><ul><li><a href="#source-file-introduction" class="table-of-contents__link toc-highlight">Source file introduction</a></li><li><a href="#name-paths" class="table-of-contents__link toc-highlight">Name paths</a></li><li><a href="#packages" class="table-of-contents__link toc-highlight">Packages</a></li><li><a href="#libraries" class="table-of-contents__link toc-highlight">Libraries</a></li><li><a href="#imports-1" class="table-of-contents__link toc-highlight">Imports</a></li><li><a href="#namespaces" class="table-of-contents__link toc-highlight">Namespaces</a></li></ul></li><li><a href="#caveats" class="table-of-contents__link toc-highlight">Caveats</a><ul><li><a href="#package-and-library-name-conflicts" class="table-of-contents__link toc-highlight">Package and library name conflicts</a></li><li><a href="#potential-refactorings" class="table-of-contents__link toc-highlight">Potential refactorings</a></li><li><a href="#preference-for-few-child-namespaces" class="table-of-contents__link toc-highlight">Preference for few child namespaces</a></li><li><a href="#redundant-markers" class="table-of-contents__link toc-highlight">Redundant markers</a></li></ul></li><li><a href="#open-questions" class="table-of-contents__link toc-highlight">Open questions</a><ul><li><a href="#different-file-extensions" class="table-of-contents__link toc-highlight">Different file extensions</a></li><li><a href="#imports-from-other-languages" class="table-of-contents__link toc-highlight">Imports from other languages</a></li><li><a href="#imports-from-urls" class="table-of-contents__link toc-highlight">Imports from URLs</a></li><li><a href="#test-file-type" class="table-of-contents__link toc-highlight">Test file type</a></li></ul></li><li><a href="#alternatives-considered" class="table-of-contents__link toc-highlight">Alternatives considered</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/carbon-language/carbon-lang" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/ZjVdShJDAs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/carbon-language/carbon-lang/blob/trunk/CODE_OF_CONDUCT.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.e89ea4d0.js"></script>
<script src="/assets/js/main.6441d3bf.js"></script>
</body>
</html>